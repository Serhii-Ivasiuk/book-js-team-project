{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-9e0ab7924c77f1bd.js","src/js/scripts.js","src/js/main-page-all-catigories.js","src/js/see-more.js","src/js/render-categories.js","src/js/utility/normilize-main-title.js","src/js/bookshelf.js","src/js/close-pop-up.js","node_modules/@parcel/runtime-js/lib/runtime-fd50654541a66a56.js","node_modules/@parcel/runtime-js/lib/runtime-67ae93a29efaef04.js","node_modules/@parcel/runtime-js/lib/runtime-5c3b1534d60f7cfe.js","node_modules/@parcel/runtime-js/lib/runtime-08a9e4bb11e25c8c.js","node_modules/@parcel/runtime-js/lib/runtime-d4cf5ffbe15ee498.js","node_modules/@parcel/runtime-js/lib/runtime-1827396f88562bbc.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"5ZPII\\\":\\\"index.e157de86.js\\\",\\\"3OouQ\\\":\\\"amazon@1x.17c4c4f2.png\\\",\\\"ctt8U\\\":\\\"amazon@2x.225c89fa.png\\\",\\\"1XqBp\\\":\\\"apple@1x.bdfd714b.png\\\",\\\"gK52N\\\":\\\"apple@2x.93da152b.png\\\",\\\"lT7aj\\\":\\\"book-shop@1x.926d07c4.png\\\",\\\"ifLYX\\\":\\\"book-shop@2x.d7c8ffd1.png\\\",\\\"2Hrug\\\":\\\"shopping-list.7698f429.js\\\"}\"));","import {\n  getCategoryList,\n  getBooksByCategory,\n  getTopBooks,\n  getBookDetail,\n} from './api-service';\n\nimport './main-page-all-catigories';\n//import see more\nimport './see-more';\n\n//import dark/ligth theme\nimport './dark-light-theme';\n\nimport './main-page-all-catigories';\nimport './see-more';\nimport '../js_support/support';\nimport './firebase/firebase-user';\nimport './user-bar-dropdown';\nimport './authorization-modal';\nimport './bookshelf';\n\n// to-top-button\nimport './to-top';\n\n// render category list\nimport './render-categories';\n\n// mobile-menu\nimport './modal-menu';\n\n// pop up\nimport './close-pop-up';\n","import { getTopBooks } from './api-service';\nimport { refs } from './utility/refs';\n\nexport function renderAllCategories() {\n\n  let mainTitleAllCategories = `<h1 class='bookcase__cda'>\n          Best Sellers <span class='bookcase__filter'>Books</span>\n        </h1>`;\n\n  const containerBookshelfList = document.createElement('ul');\n  containerBookshelfList.classList.add('bookshelf__list');\n\n  getTopBooks().then( ( allCategories ) => {\n\n    if(!Boolean(allCategories.length)) {\n      mainTitleAllCategories = `<h1 class='bookcase__cda' style='text-align: center; margin-top: 50px'>\n          There are no data to display, please select another category\n        </h1>`;\n      return refs.mainSectionCategories.innerHTML = mainTitleAllCategories;\n    }\n\n    const result = allCategories.map( ( { list_name, books } ) => {\n      return `\n          <li class='bookshelf__item'>\n            <h2 class='bookshelf__title'>${ list_name }</h2>\n            <ul class='bookshelf__content book-card__list'>\n              ${ books.map( ( { _id, book_image_height, book_image_width, author, book_image, title } ) => {\n                  return `<li class='book-card__item'>\n                  <a class='book-card__link' href='#' data-id='${ _id }'>\n                    <div class='book-card__wrapper'>\n                      <img class='book-card__image' src='${ book_image }' alt=\"Here must be book's name\"\n                      width='${ book_image_width }'\n                      height='${ book_image_height }'>\n                      <div class='book-card__overlay'>\n                        <p class='book-card__quick-view-text'>quick view</p>\n                      </div>\n                    </div>\n                  </a>\n                  <div class='book-card__wrap'>\n                    <h3 class='book-card__name'>${ title }</h3>\n                    <p class='book-card__author'>${ author }</p>\n                  </div>\n                </li>`;\n              } ).join( '' ) }\n        </ul>\n            <button class='bookshelf__btn' type='button' data-see-more data-category-name='${ list_name }'>see more</button>\n         </li>\n      `;\n    } ).join('');\n    containerBookshelfList.innerHTML = result;\n    refs.mainSectionCategories.innerHTML = mainTitleAllCategories;\n    refs.mainSectionCategories.appendChild(containerBookshelfList);\n  } ).catch( ( error ) => {\n    console.log( error.message );\n  } );\n\n}\n\nrenderAllCategories();","import { refs } from './utility/refs';\nimport { onCategoryItemClick } from './render-categories';\n\nrefs.mainSectionCategories.addEventListener( 'click', onCategoryItemClick );","import { getBooksByCategory, getCategoryList, getTopBooks } from './api-service';\nimport { normalizeMainTitle } from './utility/normilize-main-title';\nimport { renderAllCategories } from './main-page-all-catigories';\nimport { refs } from './utility/refs';\n\nconst categoriesList = document.querySelector( '.categories__list' );\nconst sectionCategory = document.querySelector( '.bookcase' );\ngetCategoryList().then( categoryList => {\n  const categoryListItems = categoryList.map( category => {\n    return `\n        <li class = 'categories__item'>\n          <a href='#' data-category-name='${ category }' class='categories__name'>${ category }</a>\n        </li>`;\n  } ).join( '' );\n  categoriesList.innerHTML = `\n       <li class='categories__item categories__item--fixed'>\n          <a href='#' class='categories__name categories__active' data-category-name='All categories'>All categories</a>\n       </li>`;\n  categoriesList.insertAdjacentHTML( 'beforeend', categoryListItems );\n} ).catch( error => console.log( error.message ) );\n\ncategoriesList.addEventListener( 'click', onCategoryItemClick );\n\nexport function onCategoryItemClick( e ) {\n  e.preventDefault();\n  const categoryName = e.target.dataset.categoryName;\n\n  if( !categoryName ) {\n    return;\n  }\n\n  let mainTitle = document.createElement( 'h1' );\n  const conteinerCategoryBooks = document.createElement( 'ul' );\n  mainTitle.classList.add( 'bookcase__cda' );\n  mainTitle.innerHTML = normalizeMainTitle( categoryName );\n  conteinerCategoryBooks.classList.add( 'bookshelf__content', 'book-card__list' );\n\n\n  if( categoryName === 'All categories' ) {\n    renderAllCategories();\n    return;\n  }\n\n\n  getBooksByCategory( categoryName ).then( data => {\n\n    if(!Boolean(data.length)) {\n      mainTitle = `<h1 class='bookcase__cda' style='text-align: center; margin-top: 50px'>\n            There are no data to display, please select another category\n          </h1>`;\n      return refs.mainSectionCategories.innerHTML = mainTitle;\n    }\n\n    const booksList = data.map(\n      ( {\n        book_image,\n        book_image_height,\n        book_image_width,\n        author,\n        title,\n        buy_links,\n        _id,\n      } ) => {\n        return `<li class='book-card__item'>\n  <a class='book-card__link' href='#' data-id='${ _id }'>\n    <div class='book-card__wrapper'>\n      <img\n        class='book-card__image'\n        src='${ book_image }'\n        alt=\"Here must be book's name\"\n        width='${ book_image_width }'\n        height = '${ book_image_height }'\n      />\n      <div class='book-card__overlay'>\n        <p class='book-card__quick-view-text'>quick view</p>\n      </div>\n    </div>\n  </a>\n  <div class='book-card__wrap'>\n    <h3 class='book-card__name'>${ title }</h3>\n    <p class='book-card__author'>${ author }</p>\n  </div>\n</li>`;\n      },\n    ).join( '' );\n\n    conteinerCategoryBooks.innerHTML = booksList;\n\n    sectionCategory.innerHTML = '';\n    sectionCategory.appendChild( mainTitle );\n\n    sectionCategory.appendChild( conteinerCategoryBooks );\n  } ).catch( error => console.log( error.message ) );\n}\n","export function normalizeMainTitle(title) {\n  let lastWordCategoryName = title.split(' ');\n  if(lastWordCategoryName.length === 1) {\n    return lastWordCategoryName;\n  }\n  lastWordCategoryName = lastWordCategoryName[lastWordCategoryName.length - 1];\n  let categoryName = title.split(' ');\n  categoryName.pop();\n  let innerCategoryName = categoryName.join(' ');\n  return `${innerCategoryName} <span class=\"bookcase__filter\">${lastWordCategoryName}</span>`;\n}\n","import { refs } from './utility/refs';\nimport { doc } from 'firebase/firestore/lite';\nimport { getBookDetail } from './api-service';\n\nimport {\n  onPopUpBackdropClick,\n  onPopUpEscapeKeydown,\n  closePopUp,\n} from './close-pop-up';\n\nimport amazon from '../images/book-modal/amazon@1x.png';\nimport amazon2x from '../images/book-modal/amazon@2x.png';\nimport apple from '../images/book-modal/apple@1x.png';\nimport apple2x from '../images/book-modal/apple@2x.png';\nimport bookShop from '../images/book-modal/book-shop@1x.png';\nimport bookShop2x from '../images/book-modal/book-shop@2x.png';\n\nconst bookshelfContainer = document.querySelector('.bookcase');\n\nbookshelfContainer.addEventListener('click', onClickBook);\n\nasync function onClickBook(e) {\n  e.preventDefault();\n\n  if (!e.target.closest('.book-card__link')) {\n    return;\n  }\n\n  const bookId = e.target.closest('.book-card__link').dataset.id;\n  const bookData = await getBookDetail(bookId);\n  const markup = createMarkupCard(bookData);\n\n  refs.popupCardContainer.innerHTML = markup;\n\n  document.body.style.overflow = 'hidden';\n  refs.popupBackdrop.classList.remove('is-hidden');\n  refs.popupCloseBtn.addEventListener('click', closePopUp);\n  refs.popupBackdrop.addEventListener('click', onPopUpBackdropClick);\n  window.addEventListener('keydown', onPopUpEscapeKeydown);\n}\n\nfunction createMarkupCard({\n  title,\n  author,\n  book_image_height,\n  book_image_width,\n  book_image,\n  description,\n  buy_links,\n}) {\n  if (!description) {\n    description = 'N/A';\n  }\n  if (!author) {\n    author = 'N/A';\n  }\n  if (!title) {\n    title = 'N/A';\n  }\n\n  let amazonLink = '';\n  let appleLink = '';\n  let bookShopLink = '';\n\n  buy_links.forEach(link => {\n    if (link.name === 'Amazon') {\n      amazonLink = link.url;\n    }\n\n    if (link.name === 'Apple Books') {\n      appleLink = link.url;\n    }\n\n    if (link.name === 'Bookshop') {\n      bookShopLink = link.url;\n    }\n  });\n  return `<div class=\"pop-up__block-img\"> <img\n      class=\"pop-up__img \"\n      src=${book_image}\n      alt='${title}'\n      width=${book_image_width}\n      heigth=${book_image_height}\n    />\n    </div>\n    <div class=\"pop-up__book-info\">\n      <h2 class=\"card__book-name \">${title}</h2>\n      <h3 class=\"card__book-author \">${author}</h3>\n      <p class=\"card__book-text \">\n        ${description}\n      </p>\n      <div class=\"book-shop__thumb\">\n        <a href=\"${amazonLink}\" class=\"book-shop__link\" target=\"_blank\">\n          <picture>\n            <source\n              srcset=\"\n                ${amazon},\n                ${amazon2x}\n              \"\n            />\n            <img\n              class=\"book-shop__img\"\n              src=\"${amazon}\"\n              alt=\"amazon\"\n              width=\"48\"\n            />\n          </picture>\n        </a>\n        <a href=\"${appleLink}\" class=\"book-shop__link\" target=\"_blank\"\n          ><picture>\n            <source\n              srcset=\"\n                ${apple},\n                ${apple2x}\n              \"\n            />\n            <img\n              class=\"book-shop__img\"\n              src=\"${apple}\"\n              alt=\"apple\"\n              width=\"28\"\n            /> </picture\n        ></a>\n        <a href=\"${bookShopLink}\" class=\"book-shop__link\" target=\"_blank\"\n          ><picture>\n            <source\n              srcset=\"\n                ${bookShop},\n                ${bookShop2x}\n              \"\n            />\n            <img\n              class=\"book-shop__img\"\n              src=\"${bookShop}\"\n              alt=\"book-shop\"\n              width=\"32\"\n            /> </picture\n        ></a>\n      </div>\n    </div>`;\n}\n","import { refs } from './utility/refs';\nconst ESC_KEY_POPUP = 'Escape';\n\n// click on backdrop closes Pop Up\nexport function onPopUpBackdropClick(event) {\n  if (event.currentTarget === event.target) {\n    closePopUp();\n  }\n}\n\n// click on Esc closes Pop Up\nexport function onPopUpEscapeKeydown(event) {\n  if (event.key === ESC_KEY_POPUP) {\n    closePopUp();\n  }\n}\n\n// closes Pop Up and removes listeners\nexport function closePopUp() {\n  refs.popupBackdrop.classList.add('is-hidden');\n\n  // remove listeners from closeModalBtn, backdrop, keydown(escape)\n  refs.popupCloseBtn.removeEventListener('click', closePopUp);\n  refs.popupBackdrop.removeEventListener('click', onPopUpBackdropClick);\n  window.removeEventListener('keydown', onPopUpEscapeKeydown);\n  document.body.style.overflow = '';\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"3OouQ\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"ctt8U\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"1XqBp\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"gK52N\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lT7aj\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"ifLYX\")).toString();"],"names":["parcelRequire","register","JSON","parse","$7me8F","$6128e9e7d3218a15$export$5d9ce0d4feca8c54","mainTitleAllCategories","containerBookshelfList","document","createElement","classList","add","getTopBooks","then","allCategories","Boolean","length","$in2tx","refs","mainSectionCategories","innerHTML","result","map","list_name","books","_id","book_image_height","book_image_width","author","book_image","title","join","appendChild","catch","error","console","log","message","$777ce85cc3b2c375$export$883bce742a325e8","lastWordCategoryName","split","categoryName","pop","$3bf75b23c61476cf$var$categoriesList","querySelector","$3bf75b23c61476cf$var$sectionCategory","$3bf75b23c61476cf$export$6f59276a3735a25b","e","preventDefault","target","dataset","mainTitle","conteinerCategoryBooks","getBooksByCategory","data","booksList","buy_links","getCategoryList","categoryList","categoryListItems","category","insertAdjacentHTML","addEventListener","$e992b59938b7be08$export$e71d71b1248c2c46","event","currentTarget","$e992b59938b7be08$export$a91cc650c2581296","$e992b59938b7be08$export$9f1ecdbf70301f40","key","popupBackdrop","popupCloseBtn","removeEventListener","window","body","style","overflow","$9ba05085cb522909$exports","URL","resolve","import","meta","url","toString","$710801a6768c46d6$exports","$f30725d53a5f226a$exports","$12e1b74fccc730d9$exports","$517d2ca70bdee327$exports","$9352f9d5b58ee851$exports","async","closest","bookId","id","markup","description","amazonLink","appleLink","bookShopLink","forEach","link","name","$parcel$interopDefault","$368638865275aebc$var$createMarkupCard","getBookDetail","popupCardContainer","remove"],"version":3,"file":"index.e157de86.js.map"}