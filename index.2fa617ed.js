!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},t={},a=n.parcelRequired7c6;null==a&&((a=function(e){if(e in o)return o[e].exports;if(e in t){var n=t[e];delete t[e];var a={id:e,exports:{}};return o[e]=a,n.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,n){t[e]=n},n.parcelRequired7c6=a),a("iE7OH").register(JSON.parse('{"EVgbq":"index.2fa617ed.js","izqLI":"shoping-list-bg@1x.2c75914c.png","5VkSf":"empty_pic.dcf0d48a.jpg","6ztcb":"amazon@1x.17c4c4f2.png","1iaLI":"amazon@2x.225c89fa.png","f8I3T":"apple@1x.bdfd714b.png","3ZLqn":"apple@2x.93da152b.png","9Cr2S":"book-shop@1x.926d07c4.png","8Aq8R":"book-shop@2x.d7c8ffd1.png","lxDUL":"shopping-list.b4a476e6.js"}')),a("1h2Gi");var i=a("1h2Gi"),r=a("kVdBw"),s=a("6JpON");r=a("kVdBw");function c(){!r.refs.spinner.classList.contains("done")&&r.refs.spinner.classList.add("done"),r.refs.spinner.replaceChildren(),document.body.style.overflow=""}var l;function d(){var n=document.createElement("img");n.src=e(l),n.classList.add("not-found");var o=document.createElement("div");o.classList.add("warning-message");return o.innerHTML="<p> There are no data to display, please select another category.</p>",o.appendChild(n),o}l=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("izqLI"),a("kVdBw");var p;function u(){var n=document.createElement("ul");n.classList.add("bookshelf__list"),r.refs.spinner.classList.contains("done")&&r.refs.spinner.classList.remove("done"),r.refs.spinner.insertAdjacentHTML("afterbegin",'\n  <div class="book">\n    <div class="inner">\n      <div class="left"></div>\n      <div class="middle"></div>\n      <div class="right"></div>\n    </div>\n    <ul>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n    </ul>\n  </div>'),document.body.style.overflow="hidden",(0,i.getTopBooks)().then((function(o){if(!Boolean(o.length))return r.refs.mainSectionCategories.innerHTML="",r.refs.mainSectionCategories.appendChild(d());var t=o.map((function(n){var o=n.list_name,t=n.books;return"\n          <li class='bookshelf__item'>\n            <h2 class='bookshelf__title'>".concat(o,"</h2>\n            <ul class='bookshelf__content book-card__list'>\n              ").concat(t.map((function(n){var o=n._id,t=n.book_image_height,a=n.book_image_width,i=n.author,r=n.book_image,s=n.title;return r||(r=e(p),t=500,a=330),"<li class='book-card__item'>\n                  <a class='book-card__link' href='#' data-id='".concat(o,"'>\n                    <div class='book-card__wrapper'>\n                      <img class='book-card__image' src='").concat(r,"' alt=\"Here must be book's name\"\n                      width='").concat(a,"'\n                      height='").concat(t,"'>\n                      <div class='book-card__overlay'>\n                        <p class='book-card__quick-view-text'>quick view</p>\n                      </div>\n                    </div>\n                  </a>\n                  <div class='book-card__wrap'>\n                    <h3 class='book-card__name'>").concat(s||"Unknown title","</h3>\n                    <p class='book-card__author'>").concat(i||"Unknown author","</p>\n                  </div>\n                </li>")})).join(""),"\n                \n        </ul>\n            <button class='bookshelf__btn' type='button' data-see-more data-category-name='").concat(o,"'>see more</button>\n         </li>\n      ")})).join("");n.innerHTML=t,r.refs.mainSectionCategories.innerHTML="<h1 class='bookcase__cda'>\n          Best Sellers <span class='bookcase__filter'>Books</span>\n        </h1>",r.refs.mainSectionCategories.appendChild(n)})).catch((function(n){e(s).Notify.failure("Network error, please try again later")})).finally(c)}p=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("5VkSf"),u(),r.refs.logo.addEventListener("click",(function(){u()}));r=a("kVdBw"),i=a("1h2Gi");function f(e){var n=e.split(" ");if(1===n.length)return n;n=n[n.length-1];var o=e.split(" ");o.pop();var t=o.join(" ");return"".concat(t,' <span class="bookcase__filter">').concat(n,"</span>")}r=a("kVdBw"),s=a("6JpON");function _(n){n.preventDefault();var o=n.target.dataset.categoryName;if(o){document.querySelector(".categories__active").classList.remove("categories__active"),document.querySelector('[data-category-name="'.concat(o,'"]')).classList.add("categories__active"),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"start";e.scrollIntoView({behavior:"smooth",position:n})}(r.refs.sectionCategory);var t=document.createElement("h1"),a=document.createElement("ul");t.classList.add("bookcase__cda"),t.innerHTML=f(o),a.classList.add("bookshelf__content","book-card__list"),"All categories"!==o?(0,i.getBooksByCategory)(o).then((function(n){if(!Boolean(n.length))return r.refs.mainSectionCategories.innerHTML="",r.refs.mainSectionCategories.appendChild(d());var o=n.map((function(n){var o=n.book_image,t=n.book_image_height,a=n.book_image_width,i=n.author,r=n.title,s=(n.buy_links,n._id);return o||(o=e(p),t=500,a=330),"<li class='book-card__item'>\n  <a class='book-card__link' href='#' data-id='".concat(s,"'>\n    <div class='book-card__wrapper'>\n      <img\n        class='book-card__image'\n        src='").concat(o,"'\n        alt=\"Here must be book's name\"\n        width='").concat(a,"'\n        height = '").concat(t,"'\n      />\n      <div class='book-card__overlay'>\n        <p class='book-card__quick-view-text'>quick view</p>\n      </div>\n    </div>\n  </a>\n  <div class='book-card__wrap'>\n    <h3 class='book-card__name'>").concat(r||"Unknown title","</h3>\n    <p class='book-card__author'>").concat(i||"Unknown author","</p>\n  </div>\n</li>")})).join("");a.innerHTML=o,r.refs.sectionCategory.innerHTML="",r.refs.sectionCategory.appendChild(t),r.refs.sectionCategory.appendChild(a)})).catch((function(n){return e(s).Notify.failure("Network error, please try again later")})):u()}}(0,i.getCategoryList)().then((function(e){var n=e.map((function(e){return"\n        <li class = 'categories__item'>\n          <button type=\"button\" data-category-name='".concat(e,"' class='categories__name'>").concat(e,"</button>\n        </li>")})).join("");r.refs.categoriesList.innerHTML="\n       <li class='categories__item categories__item--fixed'>\n          <button type=\"button\" class='categories__name categories__active' data-category-name='All categories'>All categories</button>\n       </li>",r.refs.categoriesList.insertAdjacentHTML("beforeend",n)})).catch((function(n){return e(s).Notify.failure("Network error, please try again later")})),r.refs.categoriesList.addEventListener("click",_),r.refs.mainSectionCategories.addEventListener("click",_),a("9hn33"),a("xpKCW"),a("9A7sA"),a("ivz30"),a("kgvtT");var g=a("bpxeT"),b=a("2TvXO");r=a("kVdBw"),s=a("6JpON");a("587DK");i=a("1h2Gi"),s=a("6JpON"),r=a("kVdBw");function k(e){e.currentTarget===e.target&&v()}function h(e){"Escape"===e.key&&v()}function v(){r.refs.popupBackdrop.classList.add("is-hidden"),r.refs.popupCloseBtn.removeEventListener("click",v),r.refs.popupBackdrop.removeEventListener("click",k),r.refs.addToLocalBtn.removeEventListener("click",A),window.removeEventListener("keydown",h),document.body.style.overflow=""}var m;m=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("6ztcb");var L;L=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("1iaLI");var y;y=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("f8I3T");var w;w=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("3ZLqn");var E;E=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("9Cr2S");var H;H=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("8Aq8R");var T,B=document.querySelector(".bookcase"),S=[],C=[],N=[];function q(){return(q=e(g)(e(b).mark((function n(o){var t,a,c;return e(b).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,o.preventDefault(),o.target.closest(".book-card__link")){n.next=4;break}return n.abrupt("return");case 4:return O(),t=o.target.closest(".book-card__link").dataset.id,N=t,n.next=9,(0,i.getBookDetail)(t);case 9:a=n.sent,c=x(a),N={bookId:t,bookData:a},r.refs.popupCardContainer.innerHTML=c,C.forEach((function(e){S.push(e.bookId)})),S.includes(N.bookId)?(r.refs.addToLocalBtn.innerHTML="remove from the shopping list",r.refs.popupDesc.style.opacity="1"):(r.refs.addToLocalBtn.innerHTML="add to shopping list",r.refs.popupDesc.style.opacity="0"),null===localStorage.getItem("user")&&(r.refs.addToLocalBtn.innerHTML="add to shopping list",r.refs.popupDesc.style.opacity="0"),a.buy_links,document.body.style.overflow="hidden",r.refs.popupBackdrop.classList.remove("is-hidden"),r.refs.popupCloseBtn.addEventListener("click",v),r.refs.popupBackdrop.addEventListener("click",k),r.refs.addToLocalBtn.addEventListener("click",A),window.addEventListener("keydown",h),n.next=28;break;case 25:n.prev=25,n.t0=n.catch(0),e(s).Notify.failure("Network error, please try again later");case 28:case"end":return n.stop()}}),n,null,[[0,25]])})))).apply(this,arguments)}function x(n){var o=n.title,t=n.author,a=n.book_image_height,i=n.book_image_width,r=n.book_image,s=n.description,c=n.buy_links;r||(r=e(p),a=500,i=330),s||(s="This book has no description yet. We will add it soon."),t||(t="Unknown author"),o||(o="Unknown title");var l="",d="",u="";return c.forEach((function(e){"Amazon"===e.name&&(l=e.url),"Apple Books"===e.name&&(d=e.url),"Bookshop"===e.name&&(u=e.url)})),'<div class="pop-up__block-img"> <img\n      class="pop-up__img "\n      src='.concat(r,"\n      alt='").concat(o,"'\n      width=").concat(i,"\n      heigth=").concat(a,'\n    />\n    </div>\n    <div class="pop-up__book-info">\n      <h2 class="card__book-name ">').concat(o,'</h2>\n      <h3 class="card__book-author ">').concat(t,'</h3>\n      <p class="card__book-text ">\n        ').concat(s,'\n      </p>\n      <div class="book-shop__thumb">\n        <a href="').concat(l,'" class="book-shop__link" target="_blank">\n          <picture>\n            <source\n              srcset="\n                ').concat(e(m),",\n                ").concat(e(L),'\n              "\n            />\n            <img\n              class="book-shop__img"\n              src="').concat(e(m),'"\n              alt="amazon"\n              width="48"\n            />\n          </picture>\n        </a>\n        <a href="').concat(d,'" class="book-shop__link" target="_blank"\n          ><picture>\n            <source\n              srcset="\n                ').concat(e(y),",\n                ").concat(e(w),'\n              "\n            />\n            <img\n              class="book-shop__img"\n              src="').concat(e(y),'"\n              alt="apple"\n              width="28"\n            /> </picture\n        ></a>\n        <a href="').concat(u,'" class="book-shop__link" target="_blank"\n          ><picture>\n            <source\n              srcset="\n                ').concat(e(E),",\n                ").concat(e(H),'\n              "\n            />\n            <img\n              class="book-shop__img"\n              src="').concat(e(E),'"\n              alt="book-shop"\n              width="32"\n            /> </picture\n        ></a>\n      </div>\n    </div>')}function A(){var n=C.some((function(e){return e.bookId===N.bookId}));if(null===localStorage.getItem("user"))return function(){if(null===localStorage.getItem("user"))return r.refs.addToLocalBtn.setAttribute("disabled","true"),r.refs.addToLocalBtn.style.backgroundColor="#b4afaf",r.refs.addToLocalBtn.style.color="#ffffff",setTimeout((function(){r.refs.addToLocalBtn.removeAttribute("disabled"),r.refs.addToLocalBtn.style="none"}),2e3),e(s).Notify.failure("Please register or sign in to your account to use this feature.",{timeout:2e3})}();n?(C=C.filter((function(e){return e.bookId!==N.bookId})),r.refs.addToLocalBtn.innerHTML="add to shopping list",r.refs.popupDesc.style.opacity="0",O()):(C.push(N),r.refs.addToLocalBtn.innerHTML="remove from the shopping list",r.refs.popupDesc.style.opacity="1",O())}function O(){localStorage.setItem("books-id",JSON.stringify(C)),S=[]}null===localStorage.getItem("books-id")?localStorage.setItem("books-id",JSON.stringify([])):(T=localStorage.getItem("books-id"),C=JSON.parse(T)),B.addEventListener("click",(function(e){return q.apply(this,arguments)})),a("8zUhP"),a("8e9SS");r=a("kVdBw");window.addEventListener("scroll",(function(){var e=r.refs.sidebar.offsetHeight,n=r.refs.content.offsetHeight,o=window.pageYOffset||document.documentElement.scrollTop;0===o&&(r.refs.sidebar.scrollTop=0),o+window.innerHeight>=n&&(r.refs.sidebar.scrollTop=e-window.innerHeight+n-o)}))}();
//# sourceMappingURL=index.2fa617ed.js.map
