function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},t={},i=n.parcelRequired7c6;null==i&&((i=function(e){if(e in o)return o[e].exports;if(e in t){var n=t[e];delete t[e];var i={id:e,exports:{}};return o[e]=i,n.call(i.exports,i,i.exports),i.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,n){t[e]=n},n.parcelRequired7c6=i),i("kyEFX").register(JSON.parse('{"5ZPII":"index.0ffd107f.js","jcnh0":"shoping-list-bg@1x.2c75914c.png","amO9v":"empty_pic.dcf0d48a.jpg","3OouQ":"amazon@1x.17c4c4f2.png","ctt8U":"amazon@2x.225c89fa.png","1XqBp":"apple@1x.bdfd714b.png","gK52N":"apple@2x.93da152b.png","lT7aj":"book-shop@1x.926d07c4.png","ifLYX":"book-shop@2x.d7c8ffd1.png","2Hrug":"shopping-list.d87827cd.js"}')),i("7me8F");var a=i("7me8F"),s=i("in2tx"),r=i("7Y9D8");s=i("in2tx");function l(){!s.refs.spinner.classList.contains("done")&&s.refs.spinner.classList.add("done"),s.refs.spinner.replaceChildren(),document.body.style.overflow=""}var c;function d(){const n=document.createElement("img");n.src=e(c),n.classList.add("not-found");const o=document.createElement("div");o.classList.add("warning-message");return o.innerHTML="<p> There are no data to display, please select another category.</p>",o.appendChild(n),o}c=new URL(i("kyEFX").resolve("jcnh0"),import.meta.url).toString(),i("in2tx");var p;function u(){const n=document.createElement("ul");n.classList.add("bookshelf__list"),s.refs.spinner.classList.contains("done")&&s.refs.spinner.classList.remove("done"),s.refs.spinner.insertAdjacentHTML("afterbegin",'\n  <div class="book">\n    <div class="inner">\n      <div class="left"></div>\n      <div class="middle"></div>\n      <div class="right"></div>\n    </div>\n    <ul>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n      <li></li>\n    </ul>\n  </div>'),document.body.style.overflow="hidden",(0,a.getTopBooks)().then((o=>{if(!Boolean(o.length))return s.refs.mainSectionCategories.innerHTML="",s.refs.mainSectionCategories.appendChild(d());const t=o.map((({list_name:n,books:o})=>`\n          <li class='bookshelf__item'>\n            <h2 class='bookshelf__title'>${n}</h2>\n            <ul class='bookshelf__content book-card__list'>\n              ${o.map((({_id:n,book_image_height:o,book_image_width:t,author:i,book_image:a,title:s})=>(a||(a=e(p),o=500,t=330),`<li class='book-card__item'>\n                  <a class='book-card__link' href='#' data-id='${n}'>\n                    <div class='book-card__wrapper'>\n                      <img class='book-card__image' src='${a}' alt="Here must be book's name"\n                      width='${t}'\n                      height='${o}'>\n                      <div class='book-card__overlay'>\n                        <p class='book-card__quick-view-text'>quick view</p>\n                      </div>\n                    </div>\n                  </a>\n                  <div class='book-card__wrap'>\n                    <h3 class='book-card__name'>${s||"Unknown title"}</h3>\n                    <p class='book-card__author'>${i||"Unknown author"}</p>\n                  </div>\n                </li>`))).join("")}\n\n        </ul>\n            <button class='bookshelf__btn' type='button' data-see-more data-category-name='${n}'>see more</button>\n         </li>\n      `)).join("");n.innerHTML=t,s.refs.mainSectionCategories.innerHTML="<h1 class='bookcase__cda'>\n          Best Sellers <span class='bookcase__filter'>Books</span>\n        </h1>",s.refs.mainSectionCategories.appendChild(n)})).catch((n=>{e(r).Notify.failure("Network error, please try again later")})).finally(l)}p=new URL(i("kyEFX").resolve("amO9v"),import.meta.url).toString(),u(),s.refs.logo.addEventListener("click",(()=>{u()}));s=i("in2tx"),a=i("7me8F");function f(e){let n=e.split(" ");if(1===n.length)return n;n=n[n.length-1];let o=e.split(" ");return o.pop(),`${o.join(" ")} <span class="bookcase__filter">${n}</span>`}s=i("in2tx"),r=i("7Y9D8");function _(n){n.preventDefault();const o=n.target.dataset.categoryName;if(!o)return;document.querySelector(".categories__active").classList.remove("categories__active");document.querySelector(`[data-category-name="${o}"]`).classList.add("categories__active"),function(e,n="start"){e.scrollIntoView({behavior:"smooth",position:n})}(s.refs.sectionCategory);let t=document.createElement("h1");const i=document.createElement("ul");t.classList.add("bookcase__cda"),t.innerHTML=f(o),i.classList.add("bookshelf__content","book-card__list"),"All categories"!==o?(0,a.getBooksByCategory)(o).then((n=>{if(!Boolean(n.length))return s.refs.mainSectionCategories.innerHTML="",s.refs.mainSectionCategories.appendChild(d());const o=n.map((({book_image:n,book_image_height:o,book_image_width:t,author:i,title:a,buy_links:s,_id:r})=>(n||(n=e(p),o=500,t=330),`<li class='book-card__item'>\n  <a class='book-card__link' href='#' data-id='${r}'>\n    <div class='book-card__wrapper'>\n      <img\n        class='book-card__image'\n        src='${n}'\n        alt="Here must be book's name"\n        width='${t}'\n        height = '${o}'\n      />\n      <div class='book-card__overlay'>\n        <p class='book-card__quick-view-text'>quick view</p>\n      </div>\n    </div>\n  </a>\n  <div class='book-card__wrap'>\n    <h3 class='book-card__name'>${a||"Unknown title"}</h3>\n    <p class='book-card__author'>${i||"Unknown author"}</p>\n  </div>\n</li>`))).join("");i.innerHTML=o,s.refs.sectionCategory.innerHTML="",s.refs.sectionCategory.appendChild(t),s.refs.sectionCategory.appendChild(i)})).catch((n=>e(r).Notify.failure("Network error, please try again later"))):u()}(0,a.getCategoryList)().then((e=>{const n=e.map((e=>`\n        <li class = 'categories__item'>\n          <button type="button" data-category-name='${e}' class='categories__name'>${e}</button>\n        </li>`)).join("");s.refs.categoriesList.innerHTML="\n       <li class='categories__item categories__item--fixed'>\n          <button type=\"button\" class='categories__name categories__active' data-category-name='All categories'>All categories</button>\n       </li>",s.refs.categoriesList.insertAdjacentHTML("beforeend",n)})).catch((n=>e(r).Notify.failure("Network error, please try again later"))),s.refs.categoriesList.addEventListener("click",_),s.refs.mainSectionCategories.addEventListener("click",_),i("eHzQI"),i("dTazW"),i("8QtOa"),i("fn969"),i("4GINZ");s=i("in2tx"),r=i("7Y9D8");i("jMLQ6");a=i("7me8F"),r=i("7Y9D8"),s=i("in2tx");function g(e){e.currentTarget===e.target&&m()}function k(e){"Escape"===e.key&&m()}function m(){s.refs.popupBackdrop.classList.add("is-hidden"),s.refs.popupCloseBtn.removeEventListener("click",m),s.refs.popupBackdrop.removeEventListener("click",g),s.refs.addToLocalBtn.removeEventListener("click",$),window.removeEventListener("keydown",k),document.body.style.overflow=""}var b;b=new URL(i("kyEFX").resolve("3OouQ"),import.meta.url).toString();var h;h=new URL(i("kyEFX").resolve("ctt8U"),import.meta.url).toString();var v;v=new URL(i("kyEFX").resolve("1XqBp"),import.meta.url).toString();var y;y=new URL(i("kyEFX").resolve("gK52N"),import.meta.url).toString();var L;L=new URL(i("kyEFX").resolve("lT7aj"),import.meta.url).toString();var w;w=new URL(i("kyEFX").resolve("ifLYX"),import.meta.url).toString();const H=document.querySelector(".bookcase");let E=[],T=[],S=[];function $(){const n=T.some((e=>e.bookId===S.bookId));if(null===localStorage.getItem("user"))return function(){if(null===localStorage.getItem("user"))return s.refs.addToLocalBtn.setAttribute("disabled","true"),s.refs.addToLocalBtn.style.backgroundColor="#b4afaf",s.refs.addToLocalBtn.style.color="#ffffff",setTimeout((()=>{s.refs.addToLocalBtn.removeAttribute("disabled"),s.refs.addToLocalBtn.style="none"}),2e3),e(r).Notify.failure("Please register or sign in to your account to use this feature.",{timeout:2e3})}();n?(T=T.filter((e=>e.bookId!==S.bookId)),s.refs.addToLocalBtn.innerHTML="add to shopping list",s.refs.popupDesc.style.opacity="0",B()):(T.push(S),s.refs.addToLocalBtn.innerHTML="remove from the shopping list",s.refs.popupDesc.style.opacity="1",B())}function B(){localStorage.setItem("books-id",JSON.stringify(T)),E=[]}null===localStorage.getItem("books-id")?localStorage.setItem("books-id",JSON.stringify([])):function(){const e=localStorage.getItem("books-id");T=JSON.parse(e)}(),H.addEventListener("click",(async function(n){try{if(n.preventDefault(),!n.target.closest(".book-card__link"))return;B();const o=n.target.closest(".book-card__link").dataset.id;S=o;const t=await(0,a.getBookDetail)(o),i=function({title:n,author:o,book_image_height:t,book_image_width:i,book_image:a,description:s,buy_links:r}){a||(a=e(p),t=500,i=330);s||(s="This book has no description yet. We will add it soon.");o||(o="Unknown author");n||(n="Unknown title");let l="",c="",d="";return r.forEach((e=>{"Amazon"===e.name&&(l=e.url),"Apple Books"===e.name&&(c=e.url),"Bookshop"===e.name&&(d=e.url)})),`<div class="pop-up__block-img"> <img\n      class="pop-up__img "\n      src=${a}\n      alt='${n}'\n      width=${i}\n      heigth=${t}\n    />\n    </div>\n    <div class="pop-up__book-info">\n      <h2 class="card__book-name ">${n}</h2>\n      <h3 class="card__book-author ">${o}</h3>\n      <p class="card__book-text ">\n        ${s}\n      </p>\n      <div class="book-shop__thumb">\n        <a href="${l}" class="book-shop__link" target="_blank">\n          <picture>\n            <source\n              srcset="\n                ${e(b)},\n                ${e(h)}\n              "\n            />\n            <img\n              class="book-shop__img"\n              src="${e(b)}"\n              alt="amazon"\n              width="48"\n            />\n          </picture>\n        </a>\n        <a href="${c}" class="book-shop__link" target="_blank"\n          ><picture>\n            <source\n              srcset="\n                ${e(v)},\n                ${e(y)}\n              "\n            />\n            <img\n              class="book-shop__img"\n              src="${e(v)}"\n              alt="apple"\n              width="28"\n            /> </picture\n        ></a>\n        <a href="${d}" class="book-shop__link" target="_blank"\n          ><picture>\n            <source\n              srcset="\n                ${e(L)},\n                ${e(w)}\n              "\n            />\n            <img\n              class="book-shop__img"\n              src="${e(L)}"\n              alt="book-shop"\n              width="32"\n            /> </picture\n        ></a>\n      </div>\n    </div>`}(t);S={bookId:o,bookData:t},s.refs.popupCardContainer.innerHTML=i,T.forEach((e=>{E.push(e.bookId)})),E.includes(S.bookId)?(s.refs.addToLocalBtn.innerHTML="remove from the shopping list",s.refs.popupDesc.style.opacity="1"):(s.refs.addToLocalBtn.innerHTML="add to shopping list",s.refs.popupDesc.style.opacity="0"),null===localStorage.getItem("user")&&(s.refs.addToLocalBtn.innerHTML="add to shopping list",s.refs.popupDesc.style.opacity="0");t.buy_links;document.body.style.overflow="hidden",s.refs.popupBackdrop.classList.remove("is-hidden"),s.refs.popupCloseBtn.addEventListener("click",m),s.refs.popupBackdrop.addEventListener("click",g),s.refs.addToLocalBtn.addEventListener("click",$),window.addEventListener("keydown",k)}catch(n){e(r).Notify.failure("Network error, please try again later")}})),i("56a1K"),i("iuRNH");s=i("in2tx");window.addEventListener("scroll",(function(){const e=s.refs.sidebar.offsetHeight,n=s.refs.content.offsetHeight,o=window.pageYOffset||document.documentElement.scrollTop;0===o&&(s.refs.sidebar.scrollTop=0),o+window.innerHeight>=n&&(s.refs.sidebar.scrollTop=e-window.innerHeight+n-o)}));
//# sourceMappingURL=index.0ffd107f.js.map
