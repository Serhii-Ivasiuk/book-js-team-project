{"mappings":"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","sources":["src/js/scripts.js","src/js/main-page-all-catigories.js","src/js/see-more.js","src/js/render-categories.js","src/js/utility/normilize-main-title.js","src/js/bookshelf.js","src/js/close-pop-up.js"],"sourcesContent":["import {\n  getCategoryList,\n  getBooksByCategory,\n  getTopBooks,\n  getBookDetail,\n} from './api-service';\n\n//import dark/ligth theme\nimport './dark-light-theme';\n\nimport './main-page-all-catigories';\nimport './see-more';\nimport '../js_support/support';\nimport './firebase/firebase-user';\nimport './user-bar-dropdown';\nimport './authorization-modal';\nimport './bookshelf';\n\n// to-top-button\nimport './to-top';\n\n// render category list\nimport './render-categories';\n\n// mobile-menu\nimport './modal-menu';\n\n// pop up\nimport './close-pop-up';\n","import { getTopBooks } from './api-service';\nimport { refs } from './utility/refs';\n\nexport function renderAllCategories() {\n\n  let mainTitleAllCategories = `<h1 class='bookcase__cda'>\n          Best Sellers <span class='bookcase__filter'>Books</span>\n        </h1>`;\n\n  const containerBookshelfList = document.createElement('ul');\n  containerBookshelfList.classList.add('bookshelf__list');\n\n  getTopBooks().then( ( allCategories ) => {\n\n    if(!Boolean(allCategories.length)) {\n      mainTitleAllCategories = `<h1 class='bookcase__cda' style='text-align: center; margin-top: 50px'>\n          There are no data to display, please select another category\n        </h1>`;\n      return refs.mainSectionCategories.innerHTML = mainTitleAllCategories;\n    }\n\n    const result = allCategories.map( ( { list_name, books } ) => {\n      return `\n          <li class='bookshelf__item'>\n            <h2 class='bookshelf__title'>${ list_name }</h2>\n            <ul class='bookshelf__content book-card__list'>\n              ${ books.map( ( { _id, book_image_height, book_image_width, author, book_image, title } ) => {\n                  return `<li class='book-card__item'>\n                  <a class='book-card__link' href='#' data-id='${ _id }'>\n                    <div class='book-card__wrapper'>\n                      <img class='book-card__image' src='${ book_image }' alt=\"Here must be book's name\"\n                      width='${ book_image_width }'\n                      height='${ book_image_height }'>\n                      <div class='book-card__overlay'>\n                        <p class='book-card__quick-view-text'>quick view</p>\n                      </div>\n                    </div>\n                  </a>\n                  <div class='book-card__wrap'>\n                    <h3 class='book-card__name'>${ title }</h3>\n                    <p class='book-card__author'>${ author }</p>\n                  </div>\n                </li>`;\n              } ).join( '' ) }\n        </ul>\n            <button class='bookshelf__btn' type='button' data-see-more data-category-name='${ list_name }'>see more</button>\n         </li>\n      `;\n    } ).join('');\n    containerBookshelfList.innerHTML = result;\n    refs.mainSectionCategories.innerHTML = mainTitleAllCategories;\n    refs.mainSectionCategories.appendChild(containerBookshelfList);\n  } ).catch( ( error ) => {\n    console.log( error.message );\n  } );\n\n}\n\nrenderAllCategories();","import { refs } from './utility/refs';\nimport { onCategoryItemClick } from './render-categories';\n\nrefs.mainSectionCategories.addEventListener( 'click', onCategoryItemClick );","import { getBooksByCategory, getCategoryList, getTopBooks } from './api-service';\nimport { normalizeMainTitle } from './utility/normilize-main-title';\nimport { renderAllCategories } from './main-page-all-catigories';\nimport { refs } from './utility/refs';\n\nconst categoriesList = document.querySelector( '.categories__list' );\nconst sectionCategory = document.querySelector( '.bookcase' );\ngetCategoryList().then( categoryList => {\n  const categoryListItems = categoryList.map( category => {\n    return `\n        <li class = 'categories__item'>\n          <a href='#' data-category-name='${ category }' class='categories__name'>${ category }</a>\n        </li>`;\n  } ).join( '' );\n  categoriesList.innerHTML = `\n       <li class='categories__item categories__item--fixed'>\n          <a href='#' class='categories__name categories__active' data-category-name='All categories'>All categories</a>\n       </li>`;\n  categoriesList.insertAdjacentHTML( 'beforeend', categoryListItems );\n} ).catch( error => console.log( error.message ) );\n\ncategoriesList.addEventListener( 'click', onCategoryItemClick );\n\nexport function onCategoryItemClick( e ) {\n  e.preventDefault();\n  const categoryName = e.target.dataset.categoryName;\n\n  if( !categoryName ) {\n    return;\n  }\n\n  let mainTitle = document.createElement( 'h1' );\n  const conteinerCategoryBooks = document.createElement( 'ul' );\n  mainTitle.classList.add( 'bookcase__cda' );\n  mainTitle.innerHTML = normalizeMainTitle( categoryName );\n  conteinerCategoryBooks.classList.add( 'bookshelf__content', 'book-card__list' );\n\n\n  if( categoryName === 'All categories' ) {\n    renderAllCategories();\n    return;\n  }\n\n\n  getBooksByCategory( categoryName ).then( data => {\n\n    if(!Boolean(data.length)) {\n      mainTitle = `<h1 class='bookcase__cda' style='text-align: center; margin-top: 50px'>\n            There are no data to display, please select another category\n          </h1>`;\n      return refs.mainSectionCategories.innerHTML = mainTitle;\n    }\n\n    const booksList = data.map(\n      ( {\n        book_image,\n        book_image_height,\n        book_image_width,\n        author,\n        title,\n        buy_links,\n        _id,\n      } ) => {\n        return `<li class='book-card__item'>\n  <a class='book-card__link' href='#' data-id='${ _id }'>\n    <div class='book-card__wrapper'>\n      <img\n        class='book-card__image'\n        src='${ book_image }'\n        alt=\"Here must be book's name\"\n        width='${ book_image_width }'\n        height = '${ book_image_height }'\n      />\n      <div class='book-card__overlay'>\n        <p class='book-card__quick-view-text'>quick view</p>\n      </div>\n    </div>\n  </a>\n  <div class='book-card__wrap'>\n    <h3 class='book-card__name'>${ title }</h3>\n    <p class='book-card__author'>${ author }</p>\n  </div>\n</li>`;\n      },\n    ).join( '' );\n\n    conteinerCategoryBooks.innerHTML = booksList;\n\n    sectionCategory.innerHTML = '';\n    sectionCategory.appendChild( mainTitle );\n\n    sectionCategory.appendChild( conteinerCategoryBooks );\n  } ).catch( error => console.log( error.message ) );\n}\n","export function normalizeMainTitle(title) {\n  let lastWordCategoryName = title.split(' ');\n  if(lastWordCategoryName.length === 1) {\n    return lastWordCategoryName;\n  }\n  lastWordCategoryName = lastWordCategoryName[lastWordCategoryName.length - 1];\n  let categoryName = title.split(' ');\n  categoryName.pop();\n  let innerCategoryName = categoryName.join(' ');\n  return `${innerCategoryName} <span class=\"bookcase__filter\">${lastWordCategoryName}</span>`;\n}\n","import { getBookDetail } from './api-service';\n\nconst bookshelfContainer = document.querySelector('.bookcase');\n\nbookshelfContainer.addEventListener('click', onClickBook);\n\nfunction onClickBook(e) {\n  e.preventDefault();\n\n  if (!e.target.closest('.book-card__link')) {\n    return;\n  }\n\n  const bookId = e.target.closest('.book-card__link').dataset.id;\n\n  getBookDetail(bookId).then(\n    ({\n      book_image_height: height,\n      book_image_width: width,\n      book_image,\n      description,\n      author,\n      title,\n    }) => {\n      console.log(height);\n      console.log(width);\n      console.log(book_image);\n      console.log(author);\n      console.log(title);\n      console.log(description);\n    }\n  );\n}\n","import { refs } from './utility/refs';\nconst ESC_KEY_POPUP = 'Escape';\n\n// add listeners to popupCloseBtn, popupBackdrop, keydown(escape)\n// !!! ------- SHOULD BE REMOVED TO OPEN POP UP FUNCTION -------- !!!\nrefs.popupCloseBtn.addEventListener('click', closePopUp);\nrefs.popupBackdrop.addEventListener('click', onPopUpBackdropClick);\nwindow.addEventListener('keydown', onPopUpEscapeKeydown);\n\n// click on backdrop closes Pop Up\nfunction onPopUpBackdropClick(event) {\n  if (event.currentTarget === event.target) {\n    closePopUp();\n  }\n}\n\n// click on Esc closes Pop Up\nfunction onPopUpEscapeKeydown(event) {\n  if (event.key === ESC_KEY_POPUP) {\n    closePopUp();\n  }\n}\n\n// closes Pop Up and removes listeners\nfunction closePopUp() {\n  refs.popupBackdrop.classList.add('is-hidden');\n\n  // remove listeners from closeModalBtn, backdrop, keydown(escape)\n  refs.popupCloseBtn.removeEventListener('click', closePopUp);\n  refs.popupBackdrop.removeEventListener('click', onPopUpBackdropClick);\n  window.removeEventListener('keydown', onPopUpEscapeKeydown);\n}\n"],"names":["parcelRequire","$1h2Gi","$46acec59beaec5a1$export$5d9ce0d4feca8c54","mainTitleAllCategories","containerBookshelfList","document","createElement","classList","add","getTopBooks","then","allCategories","Boolean","length","$kVdBw","refs","mainSectionCategories","innerHTML","result","map","param1","list_name","books","concat","param","_id","book_image_height","book_image_width","author","book_image","title","join","appendChild","catch","error","console","log","message","$11fd80f8cd23503f$export$883bce742a325e8","lastWordCategoryName","split","categoryName","pop","innerCategoryName","$06c1abdba9a1ac51$var$categoriesList","querySelector","$06c1abdba9a1ac51$var$sectionCategory","$06c1abdba9a1ac51$export$6f59276a3735a25b","e","preventDefault","target","dataset","mainTitle","conteinerCategoryBooks","getBooksByCategory","data","booksList","buy_links","getCategoryList","categoryList","categoryListItems","category","insertAdjacentHTML","addEventListener","closest","bookId","id","getBookDetail","height","width","description","$d62e5c52f4ac75e2$var$onPopUpBackdropClick","event","currentTarget","$d62e5c52f4ac75e2$var$closePopUp","$d62e5c52f4ac75e2$var$onPopUpEscapeKeydown","key","popupBackdrop","popupCloseBtn","removeEventListener","window"],"version":3,"file":"index.e4248868.js.map"}