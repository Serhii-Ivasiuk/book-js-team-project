!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},t={},a=n.parcelRequired7c6;null==a&&((a=function(e){if(e in o)return o[e].exports;if(e in t){var n=t[e];delete t[e];var a={id:e,exports:{}};return o[e]=a,n.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,n){t[e]=n},n.parcelRequired7c6=a),a("iE7OH").register(JSON.parse('{"EVgbq":"index.1c945fe2.js","izqLI":"shoping-list-bg@1x.2c75914c.png","5VkSf":"empty_pic.dcf0d48a.jpg","6ztcb":"amazon@1x.17c4c4f2.png","1iaLI":"amazon@2x.225c89fa.png","f8I3T":"apple@1x.bdfd714b.png","3ZLqn":"apple@2x.93da152b.png","9Cr2S":"book-shop@1x.926d07c4.png","8Aq8R":"book-shop@2x.d7c8ffd1.png","lxDUL":"shopping-list.7967702e.js"}')),a("1h2Gi");var s=a("1h2Gi"),c=a("kVdBw");c=a("kVdBw");function i(){!c.refs.spinner.classList.contains("done")&&c.refs.spinner.classList.add("done"),document.body.style.overflow=""}var r;function l(){var n=document.createElement("img");n.src=e(r),n.classList.add("not-found");var o=document.createElement("div");o.classList.add("warning-message");return o.innerHTML="<p> There are no data to display, please select another category.</p>",o.appendChild(n),o}r=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("izqLI"),a("kVdBw");var d;function p(){var n=document.createElement("ul");n.classList.add("bookshelf__list"),c.refs.spinner.classList.contains("done")&&c.refs.spinner.classList.remove("done"),document.body.style.overflow="hidden",(0,s.getTopBooks)().then((function(o){if(!Boolean(o.length))return c.refs.mainSectionCategories.innerHTML="",c.refs.mainSectionCategories.appendChild(l());var t=o.map((function(n){var o=n.list_name,t=n.books;return"\n          <li class='bookshelf__item'>\n            <h2 class='bookshelf__title'>".concat(o,"</h2>\n            <ul class='bookshelf__content book-card__list'>\n              ").concat(t.map((function(n){var o=n._id,t=n.book_image_height,a=n.book_image_width,s=n.author,c=n.book_image,i=n.title;return c||(c=e(d),t=500,a=330),"<li class='book-card__item'>\n                  <a class='book-card__link' href='#' data-id='".concat(o,"'>\n                    <div class='book-card__wrapper'>\n                      <img class='book-card__image' src='").concat(c,"' alt=\"Here must be book's name\"\n                      width='").concat(a,"'\n                      height='").concat(t,"'>\n                      <div class='book-card__overlay'>\n                        <p class='book-card__quick-view-text'>quick view</p>\n                      </div>\n                    </div>\n                  </a>\n                  <div class='book-card__wrap'>\n                    <h3 class='book-card__name'>").concat(i||"Unknown title","</h3>\n                    <p class='book-card__author'>").concat(s||"Unknown author","</p>\n                  </div>\n                </li>")})).join(""),"\n                \n        </ul>\n            <button class='bookshelf__btn' type='button' data-see-more data-category-name='").concat(o,"'>see more</button>\n         </li>\n      ")})).join("");n.innerHTML=t,c.refs.mainSectionCategories.innerHTML="<h1 class='bookcase__cda'>\n          Best Sellers <span class='bookcase__filter'>Books</span>\n        </h1>",c.refs.mainSectionCategories.appendChild(n)})).catch((function(e){console.log(e.message)})).finally(i)}d=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("5VkSf"),p(),c.refs.logo.addEventListener("click",(function(){p()}));c=a("kVdBw"),s=a("1h2Gi");function u(e){var n=e.split(" ");if(1===n.length)return n;n=n[n.length-1];var o=e.split(" ");o.pop();var t=o.join(" ");return"".concat(t,' <span class="bookcase__filter">').concat(n,"</span>")}c=a("kVdBw");function _(n){n.preventDefault();var o=n.target.dataset.categoryName;if(o){document.querySelector(".categories__active").classList.remove("categories__active"),document.querySelector('[data-category-name="'.concat(o,'"]')).classList.add("categories__active"),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"start";e.scrollIntoView({behavior:"smooth",position:n})}(c.refs.sectionCategory);var t=document.createElement("h1"),a=document.createElement("ul");t.classList.add("bookcase__cda"),t.innerHTML=u(o),a.classList.add("bookshelf__content","book-card__list"),"All categories"!==o?(0,s.getBooksByCategory)(o).then((function(n){if(!Boolean(n.length))return c.refs.mainSectionCategories.innerHTML="",c.refs.mainSectionCategories.appendChild(l());var o=n.map((function(n){var o=n.book_image,t=n.book_image_height,a=n.book_image_width,s=n.author,c=n.title,i=(n.buy_links,n._id);return o||(o=e(d),t=500,a=330),"<li class='book-card__item'>\n  <a class='book-card__link' href='#' data-id='".concat(i,"'>\n    <div class='book-card__wrapper'>\n      <img\n        class='book-card__image'\n        src='").concat(o,"'\n        alt=\"Here must be book's name\"\n        width='").concat(a,"'\n        height = '").concat(t,"'\n      />\n      <div class='book-card__overlay'>\n        <p class='book-card__quick-view-text'>quick view</p>\n      </div>\n    </div>\n  </a>\n  <div class='book-card__wrap'>\n    <h3 class='book-card__name'>").concat(c||"Unknown title","</h3>\n    <p class='book-card__author'>").concat(s||"Unknown author","</p>\n  </div>\n</li>")})).join("");a.innerHTML=o,c.refs.sectionCategory.innerHTML="",c.refs.sectionCategory.appendChild(t),c.refs.sectionCategory.appendChild(a)})).catch((function(e){return console.log(e.message)})):p()}}(0,s.getCategoryList)().then((function(e){var n=e.map((function(e){return"\n        <li class = 'categories__item'>\n          <button type=\"button\" data-category-name='".concat(e,"' class='categories__name'>").concat(e,"</button>\n        </li>")})).join("");c.refs.categoriesList.innerHTML="\n       <li class='categories__item categories__item--fixed'>\n          <button type=\"button\" class='categories__name categories__active' data-category-name='All categories'>All categories</button>\n       </li>",c.refs.categoriesList.insertAdjacentHTML("beforeend",n)})).catch((function(e){return console.log(e.message)})),c.refs.categoriesList.addEventListener("click",_),c.refs.mainSectionCategories.addEventListener("click",_),a("9hn33"),a("xpKCW"),a("9A7sA"),a("ivz30"),a("kgvtT");var f=a("bpxeT"),g=a("2TvXO");c=a("kVdBw");a("587DK");s=a("1h2Gi"),c=a("kVdBw");function k(e){e.currentTarget===e.target&&h()}function b(e){"Escape"===e.key&&h()}function h(){c.refs.popupBackdrop.classList.add("is-hidden"),c.refs.popupCloseBtn.removeEventListener("click",h),c.refs.popupBackdrop.removeEventListener("click",k),c.refs.addToLocalBtn.removeEventListener("click",R),window.removeEventListener("keydown",b),document.body.style.overflow=""}var m;m=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("6ztcb");var v;v=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("1iaLI");var L;L=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("f8I3T");var w;w=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("3ZLqn");var y;y=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("9Cr2S");var E;E=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("8Aq8R");var H,B=document.querySelector(".bookcase"),T=[],C=[],S=[];function q(){return(q=e(f)(e(g).mark((function n(o){var t,a,i;return e(g).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.preventDefault(),o.target.closest(".book-card__link")){e.next=3;break}return e.abrupt("return");case 3:return A(),t=o.target.closest(".book-card__link").dataset.id,S=t,e.next=8,(0,s.getBookDetail)(t);case 8:a=e.sent,i=x(a),S={bookId:t,bookData:a},c.refs.popupCardContainer.innerHTML=i,C.forEach((function(e){T.push(e.bookId)})),T.includes(S.bookId)?(c.refs.addToLocalBtn.innerHTML="remove from the shopping list",c.refs.popupDesc.style.opacity="1"):(c.refs.addToLocalBtn.innerHTML="add to shopping list",c.refs.popupDesc.style.opacity="0"),a.buy_links,document.body.style.overflow="hidden",c.refs.popupBackdrop.classList.remove("is-hidden"),c.refs.popupCloseBtn.addEventListener("click",h),c.refs.popupBackdrop.addEventListener("click",k),c.refs.addToLocalBtn.addEventListener("click",R),window.addEventListener("keydown",b);case 21:case"end":return e.stop()}}),n)})))).apply(this,arguments)}function x(n){var o=n.title,t=n.author,a=n.book_image_height,s=n.book_image_width,c=n.book_image,i=n.description,r=n.buy_links;c||(c=e(d),a=500,s=330),i||(i="This book has no description yet. We will add it soon."),t||(t="Unknown author"),o||(o="Unknown title");var l="",p="",u="";return r.forEach((function(e){"Amazon"===e.name&&(l=e.url),"Apple Books"===e.name&&(p=e.url),"Bookshop"===e.name&&(u=e.url)})),'<div class="pop-up__block-img"> <img\n      class="pop-up__img "\n      src='.concat(c,"\n      alt='").concat(o,"'\n      width=").concat(s,"\n      heigth=").concat(a,'\n    />\n    </div>\n    <div class="pop-up__book-info">\n      <h2 class="card__book-name ">').concat(o,'</h2>\n      <h3 class="card__book-author ">').concat(t,'</h3>\n      <p class="card__book-text ">\n        ').concat(i,'\n      </p>\n      <div class="book-shop__thumb">\n        <a href="').concat(l,'" class="book-shop__link" target="_blank">\n          <picture>\n            <source\n              srcset="\n                ').concat(e(m),",\n                ").concat(e(v),'\n              "\n            />\n            <img\n              class="book-shop__img"\n              src="').concat(e(m),'"\n              alt="amazon"\n              width="48"\n            />\n          </picture>\n        </a>\n        <a href="').concat(p,'" class="book-shop__link" target="_blank"\n          ><picture>\n            <source\n              srcset="\n                ').concat(e(L),",\n                ").concat(e(w),'\n              "\n            />\n            <img\n              class="book-shop__img"\n              src="').concat(e(L),'"\n              alt="apple"\n              width="28"\n            /> </picture\n        ></a>\n        <a href="').concat(u,'" class="book-shop__link" target="_blank"\n          ><picture>\n            <source\n              srcset="\n                ').concat(e(y),",\n                ").concat(e(E),'\n              "\n            />\n            <img\n              class="book-shop__img"\n              src="').concat(e(y),'"\n              alt="book-shop"\n              width="32"\n            /> </picture\n        ></a>\n      </div>\n    </div>')}function R(){C.some((function(e){return e.bookId===S.bookId}))?(C=C.filter((function(e){return e.bookId!==S.bookId})),c.refs.addToLocalBtn.innerHTML="add to shopping list",c.refs.popupDesc.style.opacity="0",A()):(C.push(S),c.refs.addToLocalBtn.innerHTML="remove from the shopping list",c.refs.popupDesc.style.opacity="1",A())}function A(){localStorage.setItem("books-id",JSON.stringify(C)),T=[]}null===localStorage.getItem("books-id")?localStorage.setItem("books-id",JSON.stringify([])):(H=localStorage.getItem("books-id"),C=JSON.parse(H)),B.addEventListener("click",(function(e){return q.apply(this,arguments)})),a("8zUhP"),a("8e9SS");c=a("kVdBw");window.addEventListener("scroll",(function(){var e=c.refs.sidebar.offsetHeight,n=c.refs.content.offsetHeight,o=window.pageYOffset||document.documentElement.scrollTop;0===o&&(c.refs.sidebar.scrollTop=0),o+window.innerHeight>=n&&(c.refs.sidebar.scrollTop=e-window.innerHeight+n-o)}))}();
//# sourceMappingURL=index.1c945fe2.js.map
